<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.test.dao.IMemberDAO">
	
	<select id="getMemberOfRealid" resultType="com.test.dto.MemberDTO">
		SELECT M.lmember_id AS lmember_id, M.member_name AS member_name, MBF.MBPROFILE_URL AS member_imageUrl, M.member_realid AS member_realid
		FROM MU_MEMBER M
        LEFT OUTER JOIN MBPROFILE MBF
        ON MBF.LMEMBER_ID = M.LMEMBER_ID
		WHERE UPPER(M.MEMBER_REALID) = UPPER(#{name})
	</select>
	<select id="getMemberGroupList" resultType="com.test.dto.GroupDTO">
		SELECT GL.GRPOWER_ID AS GRPOWER_ID, GL.LGROUP_ID AS LGROUP_ID, GL.LMEMBER_ID AS LMEMBER_ID, TG.GROUP_NAME AS GROUP_NAME
		FROM GRLIST GL JOIN TBL_GROUP TG
		ON GL.LGROUP_ID = TG.LGROUP_ID
		WHERE GL.LMEMBER_ID = #{KEYNUMBER} AND 2 >= GL.GRPOWER_ID AND GL.GRLEAVE_DAY IS NULL
	</select>
</mapper>